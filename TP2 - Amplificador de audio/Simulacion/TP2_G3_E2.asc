Version 4
SHEET 1 2608 680
WIRE 752 -672 752 -720
WIRE 752 -672 672 -672
WIRE 816 -672 752 -672
WIRE 672 -640 672 -672
WIRE 816 -640 816 -672
WIRE 48 -576 16 -576
WIRE 192 -576 128 -576
WIRE 288 -576 192 -576
WIRE 368 -576 288 -576
WIRE -208 -560 -208 -592
WIRE 192 -544 192 -576
WIRE 288 -544 288 -576
WIRE 672 -544 672 -576
WIRE 816 -512 816 -560
WIRE 672 -464 672 -480
WIRE 752 -464 672 -464
WIRE -208 -448 -208 -480
WIRE -208 -448 -288 -448
WIRE 192 -448 192 -480
WIRE 288 -448 288 -480
WIRE 672 -448 672 -464
WIRE -288 -416 -288 -448
WIRE -208 -416 -208 -448
WIRE 1072 -416 1072 -688
WIRE 816 -368 816 -416
WIRE 1008 -368 816 -368
WIRE 672 -352 672 -368
WIRE -208 -304 -208 -336
WIRE 816 -304 816 -368
WIRE 816 -304 768 -304
WIRE 864 -304 816 -304
WIRE 128 -288 96 -288
WIRE 224 -288 192 -288
WIRE 288 -288 288 -304
WIRE 1072 -288 1072 -320
WIRE 864 -240 864 -304
WIRE 96 -192 96 -288
WIRE 96 -192 16 -192
WIRE 128 -192 96 -192
WIRE 224 -192 224 -288
WIRE 224 -192 208 -192
WIRE 288 -192 288 -208
WIRE 288 -192 224 -192
WIRE 416 -192 288 -192
WIRE 608 -192 496 -192
WIRE 768 -192 768 -224
WIRE 800 -192 768 -192
WIRE 1072 -176 1072 -208
WIRE 1248 -176 1072 -176
WIRE 1440 -176 1424 -176
WIRE 288 -160 288 -192
WIRE 304 -160 288 -160
WIRE 768 -160 768 -192
WIRE 1072 -144 1072 -176
WIRE 1248 -144 1248 -176
WIRE 1440 -128 1440 -176
WIRE 768 -48 768 -80
WIRE 816 -48 768 -48
WIRE 864 -48 864 -144
WIRE 864 -48 816 -48
WIRE 1440 -48 1440 -64
WIRE 1072 -32 1072 -64
WIRE 1248 -32 1248 -64
WIRE 816 16 816 -48
WIRE 816 16 688 16
WIRE 1008 16 816 16
WIRE 176 32 112 32
WIRE 688 48 688 16
WIRE 112 64 112 32
WIRE -496 80 -512 80
WIRE -352 80 -496 80
WIRE -160 80 -272 80
WIRE 80 80 -160 80
WIRE 336 96 144 96
WIRE 512 96 416 96
WIRE 624 96 512 96
WIRE 16 112 16 -192
WIRE 80 112 16 112
WIRE 512 112 512 96
WIRE -512 128 -512 80
WIRE -160 128 -160 80
WIRE 16 144 16 112
WIRE 1072 144 1072 64
WIRE 112 176 112 128
WIRE 176 176 112 176
WIRE 688 208 688 144
WIRE -512 256 -512 208
WIRE -160 256 -160 208
WIRE 16 272 16 224
WIRE 16 368 16 336
FLAG 1248 -32 0
FLAG 1248 -176 Vo
FLAG 608 -192 Vo
FLAG -512 256 0
FLAG -288 -416 0
FLAG -208 -592 Vcc
FLAG -208 -304 -Vcc
FLAG 672 -352 0
FLAG 16 368 0
FLAG 1072 144 -Vcc
FLAG 752 -720 Vcc
FLAG 1072 -688 Vcc
FLAG 16 -576 Vcc
FLAG 288 -448 0
FLAG 368 -576 VccOA
FLAG 176 32 VccOA
FLAG 176 176 -Vcc
FLAG 192 -448 0
FLAG -496 80 Vin
FLAG 288 -304 0
FLAG 304 -160 x
FLAG 688 208 -Vcc
FLAG 512 192 -Vcc
FLAG -160 256 0
FLAG 1440 -48 0
DATAFLAG 1072 -544 ""
DATAFLAG -16 80 ""
DATAFLAG 224 96 ""
DATAFLAG 336 -576 ""
DATAFLAG 1152 -176 ""
DATAFLAG 928 -368 "Ix(Q4:B)"
DATAFLAG 816 -528 "Ie(Q3)"
SYMBOL voltage -512 112 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName Vg
SYMATTR Value SINE(0 {Vin} 1k)
SYMBOL res 0 128 R0
SYMATTR InstName R1
SYMATTR Value 22
SYMBOL res 224 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 784 -208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RB
SYMATTR Value 2600
SYMBOL res 784 -64 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RA
SYMATTR Value 1000
SYMBOL res 832 -544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RE3
SYMATTR Value 330
SYMBOL res 1088 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.33
SYMBOL res 1088 -192 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 0.33
SYMBOL res 1264 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RL
SYMATTR Value 8
SYMBOL cap 0 272 R0
SYMATTR InstName C1
SYMATTR Value 680µ
SYMBOL diode 656 -640 R0
SYMATTR InstName D1
SYMBOL diode 656 -544 R0
SYMATTR InstName D2
SYMBOL npn 1008 -416 R0
SYMATTR InstName Q4
SYMATTR Value tip122
SYMATTR Prefix X
SYMBOL npn 800 -240 R0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL npn 624 48 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL OpAmps\\opamp2 112 32 R0
SYMATTR InstName U1
SYMATTR Value TL081
SYMBOL pnp 752 -416 M180
SYMATTR InstName Q3
SYMATTR Value BC557B
SYMBOL pnp 1008 64 M180
SYMATTR InstName Q5
SYMATTR Value tip127
SYMATTR Prefix X
SYMBOL voltage -208 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {VCC}
SYMBOL voltage -208 -432 R0
SYMATTR InstName V2
SYMATTR Value {VCC}
SYMBOL res 656 -464 R0
SYMATTR InstName R9
SYMATTR Value 22k
SYMBOL res 144 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs
SYMATTR Value 1k
SYMBOL cap 272 -544 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL zener 208 -480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value Z3p3
SYMBOL cap 192 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 220p
SYMBOL current 288 -288 R0
WINDOW 0 15 0 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 53 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value ""
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 400 -192 R270
WINDOW 0 32 -14 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 59 90 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value ""
SYMATTR Value2 AC {u(-prb)}
SYMBOL res 432 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k5
SYMBOL res 528 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 220
SYMBOL res -256 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -144 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 3k1
SYMBOL cap 1424 -128 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL ind 1440 -192 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 10m
TEXT 1632 -680 Left 2 !.param VCC=23 Vin=1.4
TEXT 1648 -616 Left 2 !.include TIP122.SP3\n.include TIP127.SP3\n.include TL081.301
TEXT 1656 -512 Left 2 !.model Z3p3 D(Is=1.5n Rs=.5 Cjo=185p nbv=3 bv=3.3 Ibv=1m)
TEXT 1656 -448 Left 2 ;.op
TEXT 1648 -336 Left 2 ;.tran 0 5m 0 .1u\n.param prb=0
TEXT 1920 -328 Left 2 !.ac dec 100 1 100Meg\n.step param prb list -1 1
TEXT 1672 -96 Left 2 ;1/(1-1/(2*(I(Vi)@1*V(x)@2-V(x)@1*I(Vi)@2)+V(x)@1+I(Vi)@2))
TEXT 1664 -24 Left 2 ;.step param prb list -1 1 ; set prb=0 to turn off probe
TEXT 1664 32 Left 2 ;.param prb=0
TEXT 2352 -328 Left 2 ;.ac dec 100 1 100Meg\n.param prb=0
