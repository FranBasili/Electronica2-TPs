Version 4
SHEET 1 3212 680
WIRE 752 -672 752 -720
WIRE 752 -672 672 -672
WIRE 816 -672 752 -672
WIRE 672 -640 672 -672
WIRE 816 -640 816 -672
WIRE 48 -576 16 -576
WIRE 192 -576 128 -576
WIRE 288 -576 192 -576
WIRE 368 -576 288 -576
WIRE -208 -560 -208 -592
WIRE 192 -544 192 -576
WIRE 288 -544 288 -576
WIRE 672 -544 672 -576
WIRE 816 -512 816 -560
WIRE 672 -464 672 -480
WIRE 752 -464 672 -464
WIRE -208 -448 -208 -480
WIRE -208 -448 -288 -448
WIRE 192 -448 192 -480
WIRE 288 -448 288 -480
WIRE 672 -448 672 -464
WIRE -288 -416 -288 -448
WIRE -208 -416 -208 -448
WIRE 1072 -416 1072 -688
WIRE 816 -368 816 -416
WIRE 1008 -368 816 -368
WIRE 672 -352 672 -368
WIRE -208 -304 -208 -336
WIRE 816 -304 816 -368
WIRE 816 -304 768 -304
WIRE 864 -304 816 -304
WIRE 192 -288 160 -288
WIRE 288 -288 256 -288
WIRE 352 -288 352 -304
WIRE 1072 -288 1072 -320
WIRE 864 -240 864 -304
WIRE 160 -192 160 -288
WIRE 160 -192 16 -192
WIRE 192 -192 160 -192
WIRE 288 -192 288 -288
WIRE 288 -192 272 -192
WIRE 352 -192 352 -208
WIRE 352 -192 288 -192
WIRE 480 -192 352 -192
WIRE 672 -192 560 -192
WIRE 768 -192 768 -224
WIRE 800 -192 768 -192
WIRE 1072 -176 1072 -208
WIRE 1248 -176 1072 -176
WIRE 1456 -176 1440 -176
WIRE 352 -160 352 -192
WIRE 368 -160 352 -160
WIRE 768 -160 768 -192
WIRE 1072 -144 1072 -176
WIRE 1248 -144 1248 -176
WIRE 1456 -80 1456 -112
WIRE 768 -48 768 -80
WIRE 816 -48 768 -48
WIRE 864 -48 864 -144
WIRE 864 -48 816 -48
WIRE 1072 -32 1072 -64
WIRE 1248 -32 1248 -64
WIRE 816 16 816 -48
WIRE 816 16 688 16
WIRE 1008 16 816 16
WIRE 176 32 112 32
WIRE 688 48 688 16
WIRE 112 64 112 32
WIRE -480 80 -752 80
WIRE -416 80 -480 80
WIRE -224 80 -336 80
WIRE 80 80 -224 80
WIRE 336 96 144 96
WIRE 512 96 416 96
WIRE 624 96 512 96
WIRE 16 112 16 -192
WIRE 80 112 16 112
WIRE 512 112 512 96
WIRE -752 128 -752 80
WIRE -224 128 -224 80
WIRE 16 144 16 112
WIRE 1072 144 1072 64
WIRE 112 176 112 128
WIRE 176 176 112 176
WIRE 688 208 688 144
WIRE -560 240 -560 176
WIRE -224 256 -224 208
WIRE 16 256 16 224
WIRE -752 352 -752 336
WIRE 16 352 16 320
FLAG 1248 -32 0
FLAG 1248 -176 Vo
FLAG 672 -192 Vo
FLAG -288 -416 0
FLAG -208 -592 Vcc
FLAG -208 -304 -Vcc
FLAG 672 -352 0
FLAG 16 352 0
FLAG 1072 144 -Vcc
FLAG 752 -720 Vcc
FLAG 1072 -688 Vcc
FLAG 16 -576 Vcc
FLAG 288 -448 0
FLAG 368 -576 VccOA
FLAG 176 32 VccOA
FLAG 176 176 -Vcc
FLAG 192 -448 0
FLAG -480 80 Vin
FLAG 352 -304 0
FLAG 368 -160 x
FLAG 688 208 -Vcc
FLAG 512 192 -Vcc
FLAG -224 256 0
FLAG -752 352 0
FLAG -560 240 0
FLAG 1456 -80 0
FLAG -752 208 0
DATAFLAG 1072 -496 ""
DATAFLAG -16 80 ""
DATAFLAG 224 96 ""
DATAFLAG 336 -576 ""
DATAFLAG 1152 -176 ""
DATAFLAG 928 -368 "Ix(Q4:B)"
DATAFLAG 816 -528 "Ie(Q3)"
SYMBOL voltage -752 112 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vg
SYMATTR Value SINE(0 {Vin} 20k)
SYMBOL res 0 128 R0
SYMATTR InstName R1
SYMATTR Value {mc(22, tolR1)}
SYMBOL res 288 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {mc(10k, tolR1)}
SYMBOL res 784 -208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RB
SYMATTR Value {mc(2600,tolR)}
SYMBOL res 784 -64 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RA
SYMATTR Value {mc(1000,tolR)}
SYMBOL res 832 -544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RE3
SYMATTR Value {mc(330,tolR)}
SYMBOL res 1088 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {mc(0.33,tolR)}
SYMBOL res 1088 -192 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value {mc(0.33,tolR)}
SYMBOL res 1264 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RL
SYMATTR Value 8
SYMBOL cap 0 256 R0
SYMATTR InstName C1
SYMATTR Value {mc(680u, tolC)}
SYMBOL diode 656 -640 R0
SYMATTR InstName D1
SYMBOL diode 656 -544 R0
SYMATTR InstName D2
SYMBOL npn 1008 -416 R0
SYMATTR InstName Q4
SYMATTR Value tip122
SYMATTR Prefix X
SYMBOL npn 800 -240 R0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL npn 624 48 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL OpAmps\\opamp2 112 32 R0
SYMATTR InstName U1
SYMATTR Value TL081
SYMBOL pnp 752 -416 M180
SYMATTR InstName Q3
SYMATTR Value BC557B
SYMBOL pnp 1008 64 M180
SYMATTR InstName Q5
SYMATTR Value tip127
SYMATTR Prefix X
SYMBOL voltage -208 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {VCC}
SYMBOL voltage -208 -432 R0
SYMATTR InstName V2
SYMATTR Value {VCC}
SYMBOL res 656 -464 R0
SYMATTR InstName R9
SYMATTR Value {mc(22k,tolR)}
SYMBOL res 144 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rs
SYMATTR Value {mc(1k, tolR)}
SYMBOL cap 272 -544 R0
SYMATTR InstName C3
SYMATTR Value {mc(100n, tolC)}
SYMBOL zener 208 -480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value Z3p3
SYMBOL cap 256 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value {mc(220p,tolC)}
SYMBOL current 352 -288 R0
WINDOW 0 15 0 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 53 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value ""
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 464 -192 R270
WINDOW 0 32 -14 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 59 90 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value ""
SYMATTR Value2 AC {u(-prb)}
SYMBOL res 432 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {mc(1k5, tolR)}
SYMBOL res 528 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {mc(220,tolR)}
SYMBOL res -320 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {mc(100k,tolR1)}
SYMBOL res -208 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value {mc(3k3, tolR1)}
SYMBOL bv -752 240 R0
SYMATTR InstName B1
SYMATTR Value V=.2*white(100Meg*time)
SYMBOL bv -560 80 R0
SYMATTR InstName B2
SYMATTR Value V=sin(2*pi*(floor(1k*time)+20)/(20k)*time)
SYMBOL ind 1344 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL cap 1440 -176 R0
SYMATTR InstName C2
SYMATTR Value 100n
TEXT 1768 -640 Left 2 !.param VCC=24 Vin=1.4
TEXT 1784 -576 Left 2 !.include TIP122.SP3\n.include TIP127.SP3\n.include TL081.301
TEXT 1792 -472 Left 2 !.model Z3p3 D(Is=1.5n Rs=.5 Cjo=185p nbv=3 bv=3.3 Ibv=1m)
TEXT 1808 -320 Left 2 ;.op
TEXT 1808 -272 Left 2 !.tran 0 .5m 0 .1u\n.param prb=0
TEXT 2432 -264 Left 2 ;.ac dec 100 1 100Meg\n.param prb=0
TEXT 1840 -152 Left 2 ;1/(1-1/(2*(I(Vi)@1*V(x)@2-V(x)@1*I(Vi)@2)+V(x)@1+I(Vi)@2))
TEXT 2104 -272 Left 2 ;.ac dec 100 1 100Meg\n.step param prb list -1 1
TEXT 2736 -272 Left 2 ;.param prb=0
TEXT 1808 -56 Left 2 !.param tolR=.05 tolC=.1 tolR1=.01
TEXT 1816 -8 Left 2 !.step param run 1 100 1
